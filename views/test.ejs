<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <meta name="description" content="">
  <meta name="author" content="">


  <title>index</title>

  <!-- Bootstrap core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>


</head>



<body>
  <div id='mask' style='width: 100%; height: 100%;background-color:#d3d3d3;opacity: 0.5;position: absolute; display: none;'>
      <img src='images/Spinner.gif' style="position:absolute; left:50%; top:30%; transform:translateX(-50%);"/>
  </div>  
  <div class="container">
    <div id="mainId"
      style="width: 1000px;position:absolute; left:33%; top:10%; display: none;">
      <div>
        <div class="question-div-class">
          <p id="questionNumId" class="question-p-class"
            style="font-weight: bold; font-size: 35px; color:#FF026C; font-family: -apple-system, BlinkMacSystemFont, sans-serif;">
            Q1
            </p>
        </div>
      </div>

      <div style="margin-top: 40px;">

        <p id="questionId" style="font-size: 28px;
                    font-weight: 800;
                    line-height: 1.5;
                    font-family:-apple-system, BlinkMacSystemFont, sans-serif;">
                    안녕하세요
        </p>

      </div>

      <div style="margin-top: 40px;height: 150px;">
        <div id="answerId0" class="answers" style="
          width: 440px; 
          height: 75px;  
          color: #000000;
          background-color:#f7f7f7;
          opacity: 1; 
          display: flex;
          padding: 0 30px;
          height: 100px;
          font-size: 20px;
          align-items: center;
          border-radius: 15px;
          margin-bottom: 12px;
          font-weight: 500;
          cursor: pointer;">
          1
        </div>

        <div id="answerId1" class="answers" style="
            margin-top: 10px; 
            width: 440px; 
            height: 75px; 
            color: #000000;
            background-color:#f7f7f7;
            opacity: 1; 
            display: flex;
            padding: 0 30px;
            height: 100px;
            font-size: 20px;
            align-items: center;
            border-radius: 15px;
            margin-bottom: 12px;
            font-weight: 500;
            cursor: pointer;">
          1
        </div>

        <div id="answerId2" class="answers" style="
            margin-top: 10px; 
            width: 440px; 
            height: 75px; 
            color: #000000;
            background-color:#f7f7f7;
            opacity: 1; 
            display: flex;
            padding: 0 30px;
            height: 100px;
            font-size: 20px;
            align-items: center;
            border-radius: 15px;
            margin-bottom: 12px;
            font-weight: 500;
            cursor: pointer;">
          1
        </div>

        <div id="answerId3" class="answers" style="
            margin-top: 10px; 
            width: 440px; 
            height: 75px; 
            color: #000000;
            background-color:#f7f7f7;
            opacity: 1; 
            display: flex;
            padding: 0 30px;
            height: 100px;
            font-size: 20px;
            align-items: center;
            border-radius: 15px;
            margin-bottom: 12px;
            font-weight: 500;
            cursor: pointer;">
          1
        </div>

        <div id="answerId4" class="answers" style=" 
            margin-top: 10px; 
            width: 440px; 
            height: 75px; 
            color: #000000;
            background-color:#f7f7f7;
            opacity: 1; 
            display: flex;
            padding: 0 30px;
            height: 100px;
            font-size: 20px;
            align-items: center;
            border-radius: 15px;
            margin-bottom: 12px;
            font-weight: 500;
            cursor: pointer;">
          1
        </div>

        <div id="resultId" style="display: none;">
        </div>
        <div id="goToStartDivId" style="margin-top: 40px; margin-left: 100px; display: none;">
          <img id="goToStartId" src="images/return.png" >
        </div>
      </div>

    </div>
  </div> <!-- /container -->
  <script src="js/mydata.js"></script>
  <script type="text/javascript">
    var indexP = 0;
    var qArr = [
      "어느 학과를 희망하시나요?",
    ];
    var questionType1 = [ //국문, 문창, 철학
      "청각장애지원 서비스가 필요하신가요?",
      "성적 평균 등급은 어느 구간이신가요?",
      "한 학기 학비는 어느 수준을 원하시나요?",
      "역세권 유무를 선택해주세요.",
      "장애전형 유무를 선택해주세요."
    ]
    var questionType2 = [ //유아
      "한 학기 학비는 어느 수준을 원하시나요?",
      "장애전형 유무를 선택해주세요.",
      "청각장애지원 서비스가 필요하신가요?",
      "성적 평균 등급은 어느 구간이신가요?",
      "역세권 유무를 선택해주세요.",
    ]
    var questionType3 = [ // 조리
      "청각장애지원 서비스가 필요하신가요?",
      "한 학기 학비는 어느 수준을 원하시나요?",
      "장애전형 유무를 선택해주세요.",
      "역세권 유무를 선택해주세요.",
      "성적 평균 등급은 어느 구간이신가요?",
    ]
    var answerType1 = [ //국문, 문창, 철학
      ["필수", "무관"], //장애 지원 서비스
      ["1등급 이하", "2등급 이하", "3등급 이하", "4등급 이하", "5 등급 이하"], // 성적평균
      ["200 만원 미만", "300 만원 미만", "400 만원 미만", "무관"], // 한학기 등록금
      ["필수", "무관"], //역세권 유무
      ["필수", "무관"], //장애전형  유무
    ]
    var answerType2 = [ //유아
      ["200 만원 미만", "300 만원 미만", "400 만원 미만", "무관"], // 한학기 등록금
      ["필수", "무관"], //장애전형  유무
      ["필수", "무관"], //장애 지원 서비스
      ["1등급 이하", "2등급 이하", "3등급 이하", "4등급 이하", "5 등급 이하"], // 성적평균
      ["필수", "무관"], //역세권 유무
    ]
    var answerType3 = [ // 조리
      ["필수", "무관"], //장애 지원 서비스
      ["200 만원 미만", "300 만원 미만", "400 만원 미만", "무관"], // 한학기 등록금
      ["필수", "무관"], //장애전형  유무
      ["필수", "무관"], //역세권 유무
      ["1등급 이하", "2등급 이하", "3등급 이하", "4등급 이하", "5 등급 이하"], // 성적평균
    ]
    var aArr = [
      ["국어국문학과","문예창작학과","철학과","유아 관련 학과", "조리관련학과"], // 원하는 학과
    ];
    var resultArr = [];
    var clientAnswer = {};
    var dataType = "";
    var compareArr = [];
    var chooseMajor = "";
    var majorExplanation;
    

    $(document).ready(function () {

      $(".answers").mouseenter(function () {
        $(this).css("background-color", "#FF026C")
        $(this).css("color", "#f7f7f7")
      });

      $(".answers").mouseleave(function () {
        $(this).css("background-color", "#f7f7f7")
        $(this).css("color", "#000000")
      });

      $("div").mousedown(function (e) {
        e.preventDefault();
        $(this).blur();
        return false;
      });
      $("p").mousedown(function (e) {
        e.preventDefault();
        $(this).blur();
        return false;
      });

      $("#goToStartId").on("click", function(){
        location.href = "/";
      });

      $(".answers").on("click", function () {
        //처음 클릭시 
        if($(this).text().substring($(this).text().length-1) == "과"){
          dataType = $(this).text().substring(0,1);
          switch(dataType){
            case "국" : 
              qArr =  questionType1;
              aArr = answerType1;
              compareArr = myData1;
              chooseMajor = $(this).text();
              majorExplanation = majorExplanation1;
              break;
            case "문" : 
              qArr =  questionType1;
              aArr = answerType1;
              compareArr = myData2;
              chooseMajor = $(this).text();
              majorExplanation = majorExplanation2;
              break;
            case "철" : 
              qArr =  questionType1;
              aArr = answerType1;
              compareArr = myData3;
              chooseMajor = $(this).text();
              majorExplanation = majorExplanation3;
              break;
            case "유" : 
              qArr =  questionType2;
              aArr = answerType2;
              compareArr = myData4;
              chooseMajor = $(this).text();
              majorExplanation = majorExplanation4;
              break;
            case "조" : 
              qArr =  questionType3;
              aArr = answerType3;
              compareArr = myData5;
              chooseMajor = $(this).text();
              majorExplanation = majorExplanation5;
              break;
          }

         

          // 그 이후
        }else{
          console.log($(this).text());
          if(dataType == "국" || dataType == "문" || dataType == "철"){
            switch(indexP){
              case 0 : 
                clientAnswer.chungyn = $(this).text().substring(0,1) == "필" ? "Y" : "N";
                break;
              case 1 : 
                clientAnswer.score1 = $(this).text().substring(0,1);
                break;
              case 2 : 
                clientAnswer.money1 = $(this).text().substring(0,1) == "무" ? 5 : $(this).text().substring(0,1);
                break;
              case 3 : 
                clientAnswer.station = $(this).text().substring(0,1) == "필" ? "Y" : "N";
                break;
              case 4 : 
                clientAnswer.dis = $(this).text().substring(0,1) == "필" ? "Y" : "N";
                break;
            }
          }else if(dataType == "유"){
            switch(indexP){
              case 0 : 
                clientAnswer.money1 = $(this).text().substring(0,1) == "무" ? 5 : $(this).text().substring(0,1);
                break;
              case 1 : 
                clientAnswer.dis = $(this).text().substring(0,1) == "필" ? "Y" : "N";
                break;
              case 2 : 
                clientAnswer.chungyn = $(this).text().substring(0,1) == "필" ? "Y" : "N";
                break;
              case 3 : 
                clientAnswer.score1 = $(this).text().substring(0,1);
                break;
              case 4 : 
                clientAnswer.station = $(this).text().substring(0,1) == "필" ? "Y" : "N";
                break;
            }
          }else if(dataType == "조"){
            switch(indexP){
              case 0 : 
                clientAnswer.chungyn = $(this).text().substring(0,1) == "필" ? "Y" : "N";
                break;
              case 1 : 
                clientAnswer.money1 = $(this).text().substring(0,1) == "무" ? 5 : $(this).text().substring(0,1);
                break;
              case 2 : 
                clientAnswer.dis = $(this).text().substring(0,1) == "필" ? "Y" : "N";
                break;
              case 3 : 
                clientAnswer.station = $(this).text().substring(0,1) == "필" ? "Y" : "N";
                break;
              case 4 : 
                clientAnswer.score1 = $(this).text().substring(0,1);
                break;
            }
          }
          console.log(clientAnswer);
          indexP++;

          if(indexP > 4){
            resultMethod();
            return;
          }
        }

        $("#mainId").fadeOut(1);
        settingQnA();
        $("#mainId").fadeIn(500);
        
      });


      function loadingBar() {
        $("#mask").show();
      }

      function closeLoadingBar() {
        $('#mask, #loadingImg').hide();
        $('#mask, #loadingImg').empty(); 
      }

      function clearAndNone(){
        for(var i=0;i < 5;i++){
          $("#answerId"+i).text(" ");
          $("#answerId"+i).css("visibility","hidden");
        }
      }

      function deleteAnswers(){
        for(var i=0;i < 5;i++){
          $("#answerId"+i).css("display","none");
        }
      }

      function bindingData(arrParm){
        for(var i =0 ; i < arrParm.length; i++){
          $("#answerId"+i).text(arrParm[i]);
          $("#answerId"+i).css("visibility","visible");
        }
      }

      function settingQnA() {
        $("#questionNumId").text("Q"+(indexP+1)); // Q num
        $("#questionId").text(qArr[indexP]); // Question
        
        clearAndNone();

        bindingData(aArr[indexP]);
      }

      function settingTemplate(){
        var temp1 = "<div style=\"font-weight: bold; font-size: 20px;\">#";
        var temp2 = "</div>"; 
        var temp3 = "<a style=\" text-decoration:none; font-size:15;\" href=\"";
        var temp4 = "\">, 학교 바로가기</a>";
        var temp5 = "<div style=\"font-weight: bold; font-size: 20px; margin-bottom: 15px\">";
        var temp_1 = "<div style=\" font-size: 20px;\">";
        var temp_2 = "<div style=\"font-size: 20px; margin-bottom: 25px\">";
        
        var temp10 = "<div style=\"margin-top:40px; font-weight: bold; font-size: 20px;\">#"+majorExplanation[0];  //학과명
        var temp11 = "<div style=\"font-weight: bold;margin-top:15px; font-size: 17px;\">- 학과 개요</div>";  // 학과 개요
        var temp12 = "<div style=\"font-size: 15px;\">" + majorExplanation[1] + "</div>";  // 학과 개요 내용
        var temp21 = "<div style=\"font-weight: bold;margin-top:15px; font-size: 17px;\">- 학과 특성</div>";  // 학과 특성
        var temp22 = "<div style=\"font-size: 15px;\">" + majorExplanation[2] + "</div>";  // 학과 특성 내용
        var temp31 = "<div style=\"font-weight: bold;margin-top:15px; font-size: 17px;\">- 관련 자격증</div>";  // 관련 자격증
        var temp32 = "<div style=\"font-size: 15px;\">" + majorExplanation[3] + "</div>";  // 관련 자격증 내용
        var temp41 = "<div style=\"font-weight: bold;margin-top:15px; font-size: 17px;\">- 관련 직업</div>";  // 관련 직업
        var temp42 = "<div style=\"font-size: 15px;\">" + majorExplanation[4] + "</div>";  // 관련 직업 내용
        var temp51 = "<div style=\"font-weight: bold;margin-top:15px; font-size: 17px;\">- 졸업 후 진출 분야</div>";  // 졸업 후 진출 분야 
        var temp52 = "<div style=\"font-size: 15px;\">" + majorExplanation[5] + "</div>";  // 졸업 후 진출 분야 내용
        var temp61 = "<div style=\"font-weight: bold;margin-top:15px; font-size: 17px;\">- 세부관련 학과</div>";  // 세부관련학과
        var temp62 = "<div style=\"font-size: 15px;\">" + majorExplanation[6] + "</div>";  // 세부관련학과 내용

        var appendGogo = temp10 + temp11 + temp12 + temp21 + temp22 + temp31 + temp32 + temp41 + temp42 + temp51 + temp52 + temp61 + temp62 + temp2;
        
        var exampleTemp = temp_1 + "(예시) #대학명, 학과명, 장애학생지원 센터번호, 소재지역, 학교링크" + temp2;
        exampleTemp += temp_2 + " - 지원되는 청각장애지원 서비스" + temp2;
        $("#resultId").append(exampleTemp);
        
        for(var i =0; i < resultArr.length; i++){
          var resultTemp = temp1 + resultArr[i].univ + ", " + resultArr[i].major + ", " + resultArr[i].phone + ", " + resultArr[i].area  + temp3 + resultArr[i].site + temp4 +  temp2;
          resultTemp += temp5 + " - " + resultArr[i].service + temp2;
          $("#resultId").append(resultTemp);
        }
        $("#resultId").append(appendGogo);
        

        $("#resultId").css("display","block");
      }

      function resultMethod(){

        console.log(compareArr);
        for(var i=0; i < compareArr.length; i++){
            if(clientAnswer.chungyn == "N" || clientAnswer.chungyn == compareArr[i].chungyn){
              if(clientAnswer.dis =="N" || clientAnswer.dis == compareArr[i].dis){
                if(clientAnswer.station == "N" || clientAnswer.station == compareArr[i].station){
                  
                  if(clientAnswer.score1 <= compareArr[i].score1){
                    if(clientAnswer.money1 > compareArr[i].money1){
                      resultArr.push(compareArr[i]);
                    }
                  } 

                }
              }  
            }
          }
        console.log(resultArr);
        console.log(clientAnswer)
        deleteAnswers();
        $("#mask").show();
        setTimeout(function(){
          $("#questionNumId").text("결과! - " + chooseMajor); 
          $("#goToStartDivId").css("display","block");
          $("body").css("background-color","#fafafa");
          
          if(resultArr.length == 0){
            $("#questionId").text("아쉽게도 적합한 대학교가 없습니다."); // Question  
            $("#mask").hide();
            return;
          }else{
            $("#questionId").text("당신에게 적합한 대학교들은 다음과 같습니다."); // Question
          }
          settingTemplate();
          $("#mask").hide();
        }, 1000);
        
      }

      // 시작
      function init(){
        settingQnA();
        $("#mainId").fadeIn(500);
      }
      init();
    });

  </script>

</body>

</html>